# üí° Price Comparator - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## –ö–µ–π—Å—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è

### 1. –ö–ª–∏–Ω–∏–Ω–≥–æ–≤–∞—è –∫–æ–º–ø–∞–Ω–∏—è

**–ó–∞–¥–∞—á–∞:** –°—Ä–∞–≤–Ω–∏—Ç—å —Ü–µ–Ω—ã –Ω–∞ —É–±–æ—Ä–∫—É –∫–≤–∞—Ä—Ç–∏—Ä —Å 5 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏.

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –í–∞—à —Å–∞–π—Ç: `https://cleanservice.ru/uslugi` + `https://cleanservice.ru/ceny`
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã:
  - CleanPro: `https://cleanpro.ru/price`
  - –£–±–æ—Ä–∫–∞–õ—é–∫—Å: `https://uborkalux.ru/prajs`
  - –ö–ª–∏–Ω–∏–Ω–≥–°–µ—Ä–≤–∏—Å: `https://klining.ru/stoimost/kvartiry`
  - –ß–∏—Å—Ç–æ—Ç–∞: `https://chistota.ru/ceny`
  - –ë–ª–µ—Å–∫–°–µ—Ä–≤–∏—Å: `https://blesk.ru/prajs-list`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

| –£—Å–ª—É–≥–∞ | –ú—ã | CleanPro | –£–±–æ—Ä–∫–∞–õ—é–∫—Å | –ö–ª–∏–Ω–∏–Ω–≥–°–µ—Ä–≤–∏—Å | –ß–∏—Å—Ç–æ—Ç–∞ | –ë–ª–µ—Å–∫–°–µ—Ä–≤–∏—Å |
|--------|-----|----------|------------|---------------|---------|-------------|
| –£–±–æ—Ä–∫–∞ 1-–∫–æ–º–Ω. | 2500‚ÇΩ | 2300‚ÇΩ | 2700‚ÇΩ | 2400‚ÇΩ | ‚Äî | 2600‚ÇΩ |
| –£–±–æ—Ä–∫–∞ 2-–∫–æ–º–Ω. | 3500‚ÇΩ | 3200‚ÇΩ | 3800‚ÇΩ | 3400‚ÇΩ | 3600‚ÇΩ | 3500‚ÇΩ |
| –£–±–æ—Ä–∫–∞ 3-–∫–æ–º–Ω. | 4500‚ÇΩ | 4100‚ÇΩ | 4800‚ÇΩ | 4300‚ÇΩ | 4600‚ÇΩ | 4400‚ÇΩ |
| –ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞ | 5500‚ÇΩ | 5000‚ÇΩ | ‚Äî | 5200‚ÇΩ | 5800‚ÇΩ | ‚Äî |

**–ò–Ω—Å–∞–π—Ç—ã:**
- –í—ã –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ—Å–ø–æ—Å–æ–±–Ω—ã –ø–æ 2-–∫–æ–º–Ω–∞—Ç–Ω—ã–º
- –ú–æ–∂–Ω–æ —Å–Ω–∏–∑–∏—Ç—å —Ü–µ–Ω—É –Ω–∞ 1-–∫–æ–º–Ω–∞—Ç–Ω—ã–µ
- –ì–µ–Ω–µ—Ä–∞–ª—å–Ω–∞—è —É–±–æ—Ä–∫–∞ –¥–æ—Ä–æ–∂–µ —É –ß–∏—Å—Ç–æ—Ç—ã

---

### 2. IT-–∞—É—Ç—Å–æ—Ä—Å–∏–Ω–≥ –∫–æ–º–ø–∞–Ω–∏—è

**–ó–∞–¥–∞—á–∞:** –°—Ä–∞–≤–Ω–∏—Ç—å –ø–æ—á–∞—Å–æ–≤—ã–µ —Å—Ç–∞–≤–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞–º–∏.

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –í–∞—à —Å–∞–π—Ç: 
  - `https://itoutsource.com/services`
  - `https://itoutsource.com/pricing`
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã:
  - DevTeam: `https://devteam.io/rates` + `https://devteam.io/specialists`
  - CodeFactory: `https://codefactory.com/pricing`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å:** –£ DevTeam —Ü–µ–Ω—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö (–ø–æ —Ç–∏–ø–∞–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤).

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
competitors: [
  { 
    id: '1', 
    url: 'https://devteam.io/rates', 
    name: 'DevTeam' 
  },
  { 
    id: '2', 
    url: 'https://devteam.io/specialists', 
    name: 'DevTeam'  // –¢–æ –∂–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
  },
  { 
    id: '3', 
    url: 'https://codefactory.com/pricing', 
    name: 'CodeFactory' 
  }
]
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

| –£—Å–ª—É–≥–∞ | –ú—ã | DevTeam | CodeFactory |
|--------|-----|---------|-------------|
| Senior React Developer | $65/—á–∞—Å | $60/—á–∞—Å | $70/—á–∞—Å |
| Middle Python Developer | $45/—á–∞—Å | $42/—á–∞—Å | $48/—á–∞—Å |
| DevOps Engineer | $55/—á–∞—Å | $50/—á–∞—Å | ‚Äî |
| QA Automation | $40/—á–∞—Å | ‚Äî | $45/—á–∞—Å |

---

### 3. –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∫–ª–∏–Ω–∏–∫–∞

**–ó–∞–¥–∞—á–∞:** –°—Ä–∞–≤–Ω–∏—Ç—å —Ü–µ–Ω—ã –Ω–∞ –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã —Å –∫–ª–∏–Ω–∏–∫–∞–º–∏ –≤ —Ä–∞–π–æ–Ω–µ.

**–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- –í–∞—à–∞ –∫–ª–∏–Ω–∏–∫–∞:
  - `https://dentist-clinic.ru/uslugi`
  - `https://dentist-clinic.ru/ceny`
- –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã:
  - –°—Ç–æ–º–∞–õ—é–∫—Å: `https://stomalux.ru/prajs/terapiya` + `https://stomalux.ru/prajs/hirurgiya`
  - –î–µ–Ω—Ç–∞–ü—Ä–æ: `https://dentapro.ru/stoimost`
  - –ë–µ–ª—ã–µ–ó—É–±—ã: `https://white-teeth.ru/prices`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

| –£—Å–ª—É–≥–∞ | –ú—ã | –°—Ç–æ–º–∞–õ—é–∫—Å | –î–µ–Ω—Ç–∞–ü—Ä–æ | –ë–µ–ª—ã–µ–ó—É–±—ã |
|--------|-----|-----------|----------|-----------|
| –õ–µ—á–µ–Ω–∏–µ –∫–∞—Ä–∏–µ—Å–∞ | 3500‚ÇΩ | 3200‚ÇΩ | 3800‚ÇΩ | 3400‚ÇΩ |
| –£–¥–∞–ª–µ–Ω–∏–µ –∑—É–±–∞ | 2500‚ÇΩ | 2800‚ÇΩ | 2400‚ÇΩ | 2600‚ÇΩ |
| –ò–º–ø–ª–∞–Ω—Ç–∞—Ü–∏—è | 35000‚ÇΩ | 38000‚ÇΩ | 32000‚ÇΩ | 40000‚ÇΩ |
| –û—Ç–±–µ–ª–∏–≤–∞–Ω–∏–µ | 15000‚ÇΩ | ‚Äî | 18000‚ÇΩ | 14000‚ÇΩ |

**–ê–Ω–∞–ª–∏–∑:**
- –ò–º–ø–ª–∞–Ω—Ç–∞—Ü–∏—è - –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–∞—è —Ü–µ–Ω–∞
- –û—Ç–±–µ–ª–∏–≤–∞–Ω–∏–µ –¥–æ—Ä–æ–∂–µ –ë–µ–ª—ã—Ö–ó—É–±–æ–≤ –Ω–∞ 1000‚ÇΩ
- –£–¥–∞–ª–µ–Ω–∏–µ –∑—É–±–∞ - —Å–∞–º–∞—è –Ω–∏–∑–∫–∞—è —Ü–µ–Ω–∞

---

## Best Practices

### ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

#### 1. –¢–æ—á–Ω—ã–µ URL —Å—Ç—Ä–∞–Ω–∏—Ü —Å —Ü–µ–Ω–∞–º–∏

```javascript
// –•–æ—Ä–æ—à–æ
ourPriceUrl: 'https://site.com/prices/cleaning-services'

// –ü–ª–æ—Ö–æ
ourPriceUrl: 'https://site.com'  // –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
```

#### 2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –æ–¥–Ω–æ–≥–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞

```javascript
// –ï—Å–ª–∏ —É –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–∞ —Ü–µ–Ω—ã —Ä–∞–∑–±–∏—Ç—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
competitors: [
  { id: '1', url: 'https://comp.com/prices/service-a', name: '–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç' },
  { id: '2', url: 'https://comp.com/prices/service-b', name: '–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç' },
  { id: '3', url: 'https://comp.com/prices/service-c', name: '–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç' }
]
```

#### 3. –ö—Ä–∞—Ç–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤

```javascript
// –•–æ—Ä–æ—à–æ
name: 'CleanPro'

// –ü–ª–æ—Ö–æ (—Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã)
name: '–û–û–û "–ö–ª–∏–Ω–∏–Ω–≥–°–µ—Ä–≤–∏—Å –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –£–±–æ—Ä–∫–∞ –ü–æ–º–µ—â–µ–Ω–∏–π"'
```

#### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—ã–π URL –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏ —É–±–µ–¥–∏—Ç–µ—Å—å:
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –µ—Å—Ç—å —Ü–µ–Ω—ã
- ‚úÖ –¶–µ–Ω—ã –Ω–µ —Å–∫—Ä—ã—Ç—ã –∑–∞ JavaScript (–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã)

---

### ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

#### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤

```
‚ùå https://competitor.com/calculator
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –¶–µ–Ω—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JavaScript –ø–æ—Å–ª–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–†–µ—à–µ–Ω–∏–µ:** –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ —Å—Ç–∞—Ç–∏—á–Ω—ã–º –ø—Ä–∞–π—Å-–ª–∏—Å—Ç–æ–º.

#### 2. –°—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π

```
‚ùå https://competitor.com/personal-account/prices
```

**–ü—Ä–æ–±–ª–µ–º–∞:** API –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø.

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

#### 3. PDF –ø—Ä–∞–π—Å-–ª–∏—Å—Ç—ã

```
‚ùå https://competitor.com/price-list.pdf
```

**–ü—Ä–æ–±–ª–µ–º–∞:** HTML –ø–∞—Ä—Å–µ—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PDF.

**–†–µ—à–µ–Ω–∏–µ:** –ù–∞–π–¥–∏—Ç–µ HTML –≤–µ—Ä—Å–∏—é –∏–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–π—Ç–µ PDF –≤ —Ç–µ–∫—Å—Ç –æ—Ç–¥–µ–ª—å–Ω–æ.

#### 4. –°–ª–∏—à–∫–æ–º –æ–±—â–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

```
‚ùå https://competitor.com/services
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥ –±–µ–∑ —Ü–µ–Ω.

**–†–µ—à–µ–Ω–∏–µ:** –ù–∞–π–¥–∏—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ü–µ–Ω–∞–º–∏.

---

## –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã

**–ó–∞–¥–∞—á–∞:** –°—Ä–∞–≤–Ω–∏—Ç—å —Ü–µ–Ω—ã –≤ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö.

```javascript
// –ú–æ—Å–∫–≤–∞
{
  id: '1',
  url: 'https://competitor.com/moscow/prices',
  name: '–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç (–ú–æ—Å–∫–≤–∞)'
}

// –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥
{
  id: '2',
  url: 'https://competitor.com/spb/prices',
  name: '–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç (–°–ü–±)'
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –£–≤–∏–¥–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è –≤ —Ü–µ–Ω–∞—Ö.

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ü–µ–Ω

**–ü—Ä–æ—Ü–µ—Å—Å:**
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑ —Å–µ–≥–æ–¥–Ω—è
2. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ CSV
3. –ß–µ—Ä–µ–∑ –º–µ—Å—è—Ü –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞
4. –°—Ä–∞–≤–Ω–∏—Ç–µ –¥–≤–∞ CSV —Ñ–∞–π–ª–∞

**Python —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:**

```python
import pandas as pd

# –ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
old_prices = pd.read_csv('comparison_dec.csv')
new_prices = pd.read_csv('comparison_jan.csv')

# –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
changes = pd.merge(old_prices, new_prices, on='–£—Å–ª—É–≥–∞', suffixes=('_old', '_new'))

# –ù–∞–π—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
for col in changes.columns:
    if col.endswith('_old'):
        competitor = col.replace('_old', '')
        new_col = competitor + '_new'
        
        if new_col in changes.columns:
            changes[f'{competitor}_change'] = (
                changes[new_col] - changes[col]
            )

print("–ò–∑–º–µ–Ω–µ–Ω–∏—è —Ü–µ–Ω:")
print(changes[changes.filter(like='_change').any(axis=1)])
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ú–∞—Å—Å–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑

**–ó–∞–¥–∞—á–∞:** –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å 20+ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤, –Ω–æ API –º–µ–¥–ª–µ–Ω–Ω—ã–π.

**–†–µ—à–µ–Ω–∏–µ:** –†–∞–∑–±–∏—Ç—å –Ω–∞ –±–∞—Ç—á–∏.

```javascript
const competitors = [/* 20 –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤ */];
const batchSize = 5;

for (let i = 0; i < competitors.length; i += batchSize) {
  const batch = competitors.slice(i, i + batchSize);
  
  const result = await fetch('/api/price-comparator', {
    method: 'POST',
    body: JSON.stringify({
      ourServiceUrl,
      ourPriceUrl,
      competitors: batch,
      apiKey
    })
  });
  
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  results.push(await processStream(result));
  
  // –ü–∞—É–∑–∞ –º–µ–∂–¥—É –±–∞—Ç—á–∞–º–∏
  await new Promise(resolve => setTimeout(resolve, 60000));
}

// –û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
const finalResult = mergeResults(results);
```

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron

**–ó–∞–¥–∞—á–∞:** –ï–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑.

**–†–µ—à–µ–Ω–∏–µ:** Node.js —Å–∫—Ä–∏–ø—Ç + cron.

```javascript
// analyze-prices.js
const fetch = require('node-fetch');
const fs = require('fs');

async function analyzeWeekly() {
  const response = await fetch('http://localhost:3000/api/price-comparator', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      ourServiceUrl: process.env.OUR_SERVICE_URL,
      ourPriceUrl: process.env.OUR_PRICE_URL,
      competitors: JSON.parse(process.env.COMPETITORS),
      apiKey: process.env.OPENAI_API_KEY
    })
  });

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ SSE...
  const result = await processStream(response);
  
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –¥–∞—Ç–æ–π
  const filename = `results_${new Date().toISOString()}.json`;
  fs.writeFileSync(filename, JSON.stringify(result, null, 2));
  
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å email —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
  await sendEmail({
    to: 'manager@company.com',
    subject: '–ù–µ–¥–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ü–µ–Ω –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤',
    body: formatReport(result),
    attachments: [filename]
  });
}

analyzeWeekly().catch(console.error);
```

**Crontab (–∫–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –≤ 9:00):**

```bash
0 9 * * 1 cd /path/to/project && node analyze-prices.js
```

---

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets

```javascript
import { GoogleSpreadsheet } from 'google-spreadsheet';

async function exportToGoogleSheets(result) {
  const doc = new GoogleSpreadsheet(process.env.GOOGLE_SHEET_ID);
  await doc.useServiceAccountAuth({
    client_email: process.env.GOOGLE_CLIENT_EMAIL,
    private_key: process.env.GOOGLE_PRIVATE_KEY,
  });

  await doc.loadInfo();
  const sheet = doc.sheetsByIndex[0];

  // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
  await sheet.clear();

  // –ó–∞–≥–æ–ª–æ–≤–∫–∏
  const headers = ['–£—Å–ª—É–≥–∞', '–ù–∞—à–∞ —Ü–µ–Ω–∞', ...Object.keys(result.competitors)];
  await sheet.setHeaderRow(headers);

  // –î–∞–Ω–Ω—ã–µ
  const rows = result.comparison.map(row => ({
    '–£—Å–ª—É–≥–∞': row.service,
    '–ù–∞—à–∞ —Ü–µ–Ω–∞': row.ourPrice,
    ...row.competitorPrices
  }));

  await sheet.addRows(rows);
}
```

---

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Slack

```javascript
async function notifySlack(result) {
  const webhook = process.env.SLACK_WEBHOOK_URL;
  
  // –ù–∞–π—Ç–∏ –≥–¥–µ –º—ã –¥–æ—Ä–æ–∂–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
  const expensiveServices = result.comparison.filter(row => {
    const ourPrice = parsePrice(row.ourPrice);
    const competitorPrices = Object.values(row.competitorPrices)
      .filter(p => p)
      .map(parsePrice);
    
    return competitorPrices.some(cp => cp < ourPrice);
  });

  const message = {
    text: 'üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ —Ü–µ–Ω',
    blocks: [
      {
        type: 'section',
        text: {
          type: 'mrkdwn',
          text: `*–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤:* ${Object.keys(result.competitors).length}`
        }
      },
      {
        type: 'section',
        text: {
          type: 'mrkdwn',
          text: `*–£—Å–ª—É–≥ –¥–æ—Ä–æ–∂–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤:* ${expensiveServices.length}`
        }
      },
      {
        type: 'divider'
      },
      ...expensiveServices.slice(0, 5).map(service => ({
        type: 'section',
        text: {
          type: 'mrkdwn',
          text: `‚ö†Ô∏è *${service.service}*\n–ú—ã: ${service.ourPrice}\n–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç—ã: ${Object.entries(service.competitorPrices).filter(([,p]) => p).map(([name,p]) => `${name}: ${p}`).join(', ')}`
        }
      }))
    ]
  };

  await fetch(webhook, {
    method: 'POST',
    body: JSON.stringify(message)
  });
}

function parsePrice(priceStr) {
  // –ò–∑–≤–ª–µ—á—å —á–∏—Å–ª–æ –∏–∑ —Å—Ç—Ä–æ–∫–∏ "3500 —Ä—É–±."
  const match = priceStr.match(/\d+/);
  return match ? parseInt(match[0]) : 0;
}
```

---

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Notion

```javascript
import { Client } from '@notionhq/client';

async function exportToNotion(result) {
  const notion = new Client({ auth: process.env.NOTION_TOKEN });
  
  const databaseId = process.env.NOTION_DATABASE_ID;
  
  // –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
  const page = await notion.pages.create({
    parent: { database_id: databaseId },
    properties: {
      Name: {
        title: [
          {
            text: {
              content: `–ê–Ω–∞–ª–∏–∑ —Ü–µ–Ω ${new Date().toLocaleDateString('ru')}`
            }
          }
        ]
      },
      '–ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤': {
        number: Object.keys(result.competitors).length
      },
      '–£—Å–ª—É–≥': {
        number: result.comparison.length
      }
    }
  });

  // –î–æ–±–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
  await notion.blocks.children.append({
    block_id: page.id,
    children: [
      {
        object: 'block',
        type: 'table',
        table: {
          table_width: 2 + Object.keys(result.competitors).length,
          has_column_header: true,
          children: [
            // –ó–∞–≥–æ–ª–æ–≤–∫–∏
            {
              type: 'table_row',
              table_row: {
                cells: [
                  [{ type: 'text', text: { content: '–£—Å–ª—É–≥–∞' } }],
                  [{ type: 'text', text: { content: '–ù–∞—à–∞ —Ü–µ–Ω–∞' } }],
                  ...Object.keys(result.competitors).map(name => 
                    [{ type: 'text', text: { content: name } }]
                  )
                ]
              }
            },
            // –î–∞–Ω–Ω—ã–µ
            ...result.comparison.map(row => ({
              type: 'table_row',
              table_row: {
                cells: [
                  [{ type: 'text', text: { content: row.service } }],
                  [{ type: 'text', text: { content: row.ourPrice } }],
                  ...Object.keys(result.competitors).map(name => 
                    [{ type: 'text', text: { content: row.competitorPrices[name] || '‚Äî' } }]
                  )
                ]
              }
            }))
          ]
        }
      }
    ]
  });
}
```

---

## Troubleshooting Guide

### –ü—Ä–æ–±–ª–µ–º–∞: "–ù–µ —É–¥–∞–ª–æ—Å—å –∏–∑–≤–ª–µ—á—å —Ü–µ–Ω—ã"

**–ü—Ä–∏–∑–Ω–∞–∫–∏:** –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø—É—Å—Ç—ã–µ —Ç–∞–±–ª–∏—Ü—ã –∏–ª–∏ —Ç–æ–ª—å–∫–æ —á–∞—Å—Ç—å —É—Å–ª—É–≥.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–¶–µ–Ω—ã –≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è—Ö**
   ```
   –†–µ—à–µ–Ω–∏–µ: –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Ç–µ–∫—Å—Ç —Å OCR
   ```

2. **–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ü–µ–Ω**
   ```
   –ü—Ä–∏–º–µ—Ä: "—Ç—Ä–∏ —Ç—ã—Å—è—á–∏ —Ä—É–±–ª–µ–π" –≤–º–µ—Å—Ç–æ "3000 —Ä—É–±."
   –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —á–∏—Å–µ–ª
   ```

3. **–¶–µ–Ω—ã –≤ JavaScript –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö**
   ```html
   <script>
     const prices = { service1: 3000, service2: 4000 };
   </script>
   ```
   ```
   –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ <script> —Ç–µ–≥–æ–≤ –≤ cleanHTML
   ```

4. **–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (> 30000 —Å–∏–º–≤–æ–ª–æ–≤)**
   ```
   –†–µ—à–µ–Ω–∏–µ: –£–≤–µ–ª–∏—á–∏—Ç—å maxChars –∏–ª–∏ —É–ª—É—á—à–∏—Ç—å –æ—á–∏—Å—Ç–∫—É HTML
   ```

---

### –ü—Ä–æ–±–ª–µ–º–∞: "–£—Å–ª—É–≥–∏ –Ω–µ —Å–æ–ø–æ—Å—Ç–∞–≤–∏–ª–∏—Å—å"

**–ü—Ä–∏–∑–Ω–∞–∫–∏:** –í comparison –º–Ω–æ–≥–æ –ø—É—Å—Ç—ã—Ö —è—á–µ–µ–∫.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

1. **–†–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —É—Å–ª—É–≥**
   ```
   –ù–∞—à —Å–∞–π—Ç: "–£–±–æ—Ä–∫–∞ –¥–≤—É—Ö–∫–æ–º–Ω–∞—Ç–Ω–æ–π –∫–≤–∞—Ä—Ç–∏—Ä—ã"
   –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç: "–ö–ª–∏–Ω–∏–Ω–≥ 2–∫"
   
   –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–º–ø—Ç —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–∏–Ω–æ–Ω–∏–º–æ–≤
   ```

2. **–†–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**
   ```
   –ù–∞—à —Å–∞–π—Ç: "–£–±–æ—Ä–∫–∞ –¥–æ 50 –º¬≤"
   –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç: "–£–±–æ—Ä–∫–∞ –¥–æ 70 –º¬≤"
   
   –≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ - —É—Å–ª—É–≥–∏ —Ä–∞–∑–Ω—ã–µ, –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–ø–æ—Å—Ç–∞–≤–ª—è—Ç—å—Å—è
   ```

3. **–°–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–æ–µ —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ**
   ```
   –†–µ—à–µ–Ω–∏–µ: –ò–∑–º–µ–Ω–∏—Ç—å temperature –≤ matchServices —Å 0.1 –Ω–∞ 0.3
   ```

---

### –ü—Ä–æ–±–ª–µ–º–∞: "OpenAI API timeout"

**–ü—Ä–∏–∑–Ω–∞–∫–∏:** –û—à–∏–±–∫–∞ –ø–æ—Å–ª–µ –¥–æ–ª–≥–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è.

**–†–µ—à–µ–Ω–∏—è:**

1. **–î–æ–±–∞–≤–∏—Ç—å timeout –≤ fetch**
   ```javascript
   const controller = new AbortController();
   const timeout = setTimeout(() => controller.abort(), 120000); // 2 –º–∏–Ω
   
   const response = await fetch(url, {
     signal: controller.signal
   });
   ```

2. **Retry –º–µ—Ö–∞–Ω–∏–∑–º**
   ```javascript
   async function fetchWithRetry(fn, retries = 3) {
     for (let i = 0; i < retries; i++) {
       try {
         return await fn();
       } catch (err) {
         if (i === retries - 1) throw err;
         await new Promise(r => setTimeout(r, 1000 * (i + 1)));
       }
     }
   }
   ```

---

## Performance Optimization

### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ HTML

```typescript
import NodeCache from 'node-cache';

const cache = new NodeCache({ stdTTL: 3600 }); // 1 —á–∞—Å

async function fetchHTMLCached(url: string): Promise<string> {
  const cached = cache.get(url);
  if (cached) return cached as string;
  
  const html = await fetchHTML(url);
  cache.set(url, html);
  return html;
}
```

### 2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞

```typescript
// –í–º–µ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
for (const competitor of competitors) {
  const prices = await extractPrices(competitor);
}

// –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é
const prices = await Promise.all(
  competitors.map(c => extractPrices(c))
);
```

### 3. Streaming –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```typescript
// –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –º–µ—Ä–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
for (const competitor of competitors) {
  const prices = await extractPrices(competitor);
  
  // –°—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–ª–∏–µ–Ω—Ç—É
  sendProgress({
    type: 'partial_result',
    competitor: competitor.name,
    prices
  });
}
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Price Comparator - –º–æ—â–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã –∏ best practices –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!

**–ü–æ–º–Ω–∏—Ç–µ:**
- ‚úÖ –¢–æ—á–Ω—ã–µ URL —Å —Ü–µ–Ω–∞–º–∏
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –ö—Ä–∞—Ç–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?** Telegram: @iganiga1



